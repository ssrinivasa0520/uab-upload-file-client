(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{85214:function(t,e,n){Promise.resolve().then(n.bind(n,71184))},71184:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d}});var o=n(9268),r=n(18335),u=n(89677),s=n(69030),c=n(81409),a=n(39664),l=n(56008),i=n(5056),f=function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],e=(0,a.VY)(),n=(0,l.useRouter)(),o=(0,s.T)(),f=(0,u.a)({queryFn:()=>(0,r.k)(),enabled:t,onSuccess:()=>{e.success("Logged out successfully"),o(c.ZP.actions.setUser(null)),localStorage.removeItem("token"),n.replace(i.Z.login)},onError:()=>{e.error("Log out failed"),o(c.ZP.actions.setUser(null)),localStorage.removeItem("token"),n.replace(i.Z.login)}}),{isLoading:d,isSuccess:g,isError:h}=f;return{isLoading:d,isSuccess:g,isError:h}};function d(){return f(),(0,o.jsx)(o.Fragment,{})}},5056:function(t,e,n){"use strict";n.d(e,{o:function(){return o}});let o="http://localhost:3001";e.Z={login:"/login",logout:"/logout",upload:"/upload",attachments:"/attachments"}},18335:function(t,e,n){"use strict";n.d(e,{k:function(){return s},x:function(){return u}});var o=n(5056),r=n(59317);let u=t=>r.Z.post("".concat(o.o,"/login"),t,{headers:{"Content-Type":"application/json"}}).then(t=>t.data),s=()=>r.Z.get("".concat(o.o,"/logout")).then(t=>t.data)},59317:function(t,e,n){"use strict";var o=n(24214);let r=o.Z.create({timeout:2e4});r.interceptors.request.use(t=>{let e=localStorage.getItem("token");return t.headers.Authorization="Bearer "+e,t.withCredentials=!0,t},t=>{Promise.reject(t)}),e.Z=r},69030:function(t,e,n){"use strict";n.d(e,{T:function(){return r}});var o=n(62462);let r=o.I0},81409:function(t,e,n){"use strict";var o=n(71803);let r=(0,o.oM)({name:"auth",initialState:{user:null},reducers:{setUser:(t,e)=>{console.log(e.payload),t.user=e.payload}}}),{setUser:u}=r.actions;e.ZP=r},56008:function(t,e,n){t.exports=n(8170)}},function(t){t.O(0,[656,289,614,803,677,253,961,744],function(){return t(t.s=85214)}),_N_E=t.O()}]);