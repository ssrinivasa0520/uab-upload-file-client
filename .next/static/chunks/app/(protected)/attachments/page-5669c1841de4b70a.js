(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{75455:function(e,t,r){Promise.resolve().then(r.bind(r,53619))},2543:function(e,t,r){"use strict";var a=r(9268),n=r(86923),s=r(40044);t.Z=e=>(0,a.jsx)(s.default,{className:(0,n.A)("block w-full p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700",e.customClassNames),children:e.children})},30049:function(e,t,r){"use strict";var a=r(9268);t.Z=e=>{let{isTrue:t=!0,children:r}=e;return(0,a.jsx)(a.Fragment,{children:t&&r})}},40044:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(9268);let n={FADE:{visible:{opacity:1},hidden:{opacity:0}}};var s=r(47743),l=r(27163),c=e=>{let{className:t,children:r,duration:c}=e;return(0,a.jsx)(s.M,{children:(0,a.jsx)(l.E.div,{layout:!0,variants:n.FADE,initial:"hidden",animate:"visible",transition:{duration:c},className:t,children:r})})}},53619:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(9268),n=r(5056),s=r(59317);let l=()=>s.Z.get("".concat(n.o,"/attachments")).then(e=>e.data),c=e=>s.Z.get("".concat(n.o,"/presign/").concat(e)).then(e=>e.data);var i=r(89677),o=r(39664),d=e=>{let t=(0,o.VY)(),r=(0,i.a)({queryFn:()=>l(),onSuccess:()=>{e&&e()},onError:()=>{t.error("Something went wrong")}}),{isLoading:a,isSuccess:n,isError:s,data:c}=r;return{isLoading:a,isSuccess:n,isError:s,data:c}},u=r(18024),h=r(86006),m=r(2543),x=r(30049),g=r(86923),f=function(e){let{columns:t,rows:r,shadow:n=!0}=e,s=(0,a.jsx)("tr",{children:t.map(e=>(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:e.title},"".concat(e.colName,"-").concat(e.title)))}),l=r.length?r.map(e=>(0,a.jsx)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:t.map(t=>{let r=e[t.colName],n=t.formatter?t.formatter(r,e):r;return(0,a.jsx)("td",{className:"px-6 py-4",children:n},"".concat(t.colName,"-").concat(t.title))})},e.id)):(0,a.jsx)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:(0,a.jsx)("td",{colSpan:t.length,className:"px-6 py-4 text-center",children:"No Data"})});return(0,a.jsx)("div",{className:(0,g.A)("relative overflow-x-auto  sm:rounded-lg",n?"shadow-md":""),children:(0,a.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:s}),(0,a.jsx)("tbody",{children:l})]})})},j=(e,t)=>{let r=(0,o.VY)(),a=(0,i.a)({queryFn:()=>c(e),queryKey:["attachment",e],enabled:!1,onSuccess:e=>{t&&t(e)},onError:()=>{r.error("Something went wrong")}}),{isLoading:n,isSuccess:s,isError:l,data:d,fetchStatus:u}=a;return{generateLink:()=>a.refetch(),isLoading:n,isSuccess:s,isError:l,presignedLink:d,fetchStatus:u}};let b=e=>{let{attachmentId:t}=e,[r,n]=h.useState(""),{fetchStatus:s,generateLink:l,presignedLink:c}=j(t,e=>n(e)),i="fetching"===s;return(0,a.jsxs)("div",{className:"w-24",children:[(0,a.jsx)(x.Z,{isTrue:""===r,children:(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[!i&&(0,a.jsx)("span",{className:"text-blue-500 hover:underline cursor-pointer",onClick:l,children:"Generate"}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.$j,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"text-blue-500 hover:underline",children:"Generating"})]})]})}),(0,a.jsx)(x.Z,{isTrue:""!==r,children:(0,a.jsx)("div",{className:"flex gap-1 items-center",children:(0,a.jsx)("span",{className:"text-blue-500 hover:underline cursor-pointer",onClick:()=>{window.open(c,"_blank")},children:"View"})})})]})};var N=()=>{let{isLoading:e,isError:t,isSuccess:r,data:n}=d(),s=[{title:"File Name",colName:"filename"},{title:"Created At",colName:"createdat",formatter:e=>(0,g.i)(e)},{title:"Link",colName:"link",formatter:(e,t)=>(0,a.jsx)(b,{attachmentId:t.id})}];return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen p-20",children:(0,a.jsxs)(m.Z,{customClassNames:"max-w-xl",children:[(0,a.jsx)(x.Z,{isTrue:e,children:(0,a.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,a.jsx)(u.$j,{})})}),(0,a.jsxs)(x.Z,{isTrue:r,children:[(0,a.jsx)("h5",{className:"mb-4 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Attachments"}),(0,a.jsx)(f,{columns:s,rows:n||[]})]})]})})}},5056:function(e,t,r){"use strict";r.d(t,{o:function(){return a}});let a="http://localhost:3001";t.Z={login:"/login",logout:"/logout",upload:"/upload",attachments:"/attachments"}},59317:function(e,t,r){"use strict";var a=r(24214);let n=a.Z.create({timeout:2e4});n.interceptors.request.use(e=>{let t=localStorage.getItem("token");return e.headers.Authorization="Bearer "+t,e.withCredentials=!0,e},e=>{Promise.reject(e)}),t.Z=n},86923:function(e,t,r){"use strict";r.d(t,{A:function(){return s},i:function(){return l}});var a=r(65326),n=r.n(a);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function l(e){try{return n().utc(e).local().format("MMMM Do YYYY, h:mm:ss a")}catch(e){return"Not Available"}}}},function(e){e.O(0,[550,877,296,289,554,614,677,117,253,961,744],function(){return e(e.s=75455)}),_N_E=e.O()}]);